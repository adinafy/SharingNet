# אפיון רשת חברתית מוזיקלית

## 1. מטרת האפליקציה
רשת חברתית המאפשרת למשתמשים לשתף את המוזיקה שהם מקשיבים לה. המערכת מאפשרת למשתמשים לשתף קישורים למוזיקה, לתעד את הרגשות שלהם לגבי השירים ולהתחבר עם חברים.

## 2. מבנה טבלאות נתונים (Supabase)

### טבלת users
- **id** (UUID, מפתח ראשי) - מזהה ייחודי
- **username** (טקסט, חובה, ייחודי) - שם משתמש
- **email** (טקסט, חובה, ייחודי) - כתובת אימייל
- **created_at** (חותמת זמן) - זמן יצירת המשתמש

### טבלת posts
- **id** (UUID, מפתח ראשי) - מזהה ייחודי
- **user_id** (UUID, מפתח זר ל-users) - מי שיתף את השיר
- **song_url** (טקסט, חובה) - קישור לשיר
- **song_title** (טקסט) - כותרת השיר (מתקבל מ-oEmbed)
- **song_cover** (טקסט) - קישור לתמונת העטיפה (מתקבל מ-oEmbed)
- **emotion** (טקסט) - רגש המשתמש לגבי השיר
- **text** (טקסט) - תיאור או הערות נוספות
- **created_at** (חותמת זמן) - זמן יצירת הפוסט

### טבלת comments
- **id** (UUID, מפתח ראשי) - מזהה ייחודי
- **post_id** (UUID, מפתח זר ל-posts) - הפוסט עליו מגיבים
- **user_id** (UUID, מפתח זר ל-users) - מי כתב את התגובה
- **parent_comment_id** (UUID, מפתח זר ל-comments, ניתן להיות NULL) - תגובה אב (במקרה של תגובה לתגובה)
- **text** (טקסט) - תוכן התגובה
- **emotion** (טקסט) - רגש המגיב
- **created_at** (חותמת זמן) - זמן יצירת התגובה

### טבלת friends
- **user_id** (UUID, מפתח זר ל-users) - המשתמש
- **friend_id** (UUID, מפתח זר ל-users) - החבר
- **created_at** (חותמת זמן) - זמן יצירת החברות
- **מפתח ראשי מורכב** (user_id, friend_id)

### טבלת friend_requests
- **sender_id** (UUID, מפתח זר ל-users) - מי שלח את בקשת החברות
- **receiver_id** (UUID, מפתח זר ל-users) - מי קיבל את בקשת החברות
- **message** (טקסט) - הודעה אישית (אופציונלי)
- **created_at** (חותמת זמן) - זמן יצירת הבקשה
- **מפתח ראשי מורכב** (sender_id, receiver_id)

### טבלת notifications
- **id** (UUID, מפתח ראשי) - מזהה ייחודי
- **user_id** (UUID, מפתח זר ל-users) - המשתמש שמקבל את ההתראה
- **type** (טקסט) - סוג ההתראה (תגובה חדשה, בקשת חברות, וכו')
- **related_id** (UUID) - מזהה הפריט הקשור (פוסט, תגובה, בקשת חברות)
- **is_read** (בוליאני) - האם ההתראה נקראה
- **created_at** (חותמת זמן) - זמן יצירת ההתראה

## 3. דפים עיקריים

### דף הרשמה/התחברות
- טופס הרשמה (שם משתמש, אימייל, סיסמה)
- טופס התחברות (אימייל, סיסמה)
- אפשרות מעבר בין טפסי הרשמה והתחברות

### דף פיד
- הצגת פוסטים עם:
  - שם המשתמש ששיתף
  - תצוגה מקדימה של השיר (oEmbed)
  - הצגת האפליקציה ממנה הובא הקישור לשיר
  - הרגש של המשתמש
  - טקסט/תיאור
- כפתור "הקשב עכשיו" שפותח את קישור השיר


### חלונית שיתוף שיר
- שדה להכנסת קישור לשיר
- הוספת רגש
- הוספת תיאור/טקסט
- תצוגה מקדימה של השיר (oEmbed)

### דף חיפוש וניהול חברים
- חיפוש משתמשים לפי:
  - שם משתמש
  - אימייל
- הצגת תוצאות החיפוש עם:
  - שם משתמש
  - כפתור לשליחת בקשת חברות
- ניהול בקשות חברות:
  - הצגת בקשות נכנסות
  - הצגת בקשות שנשלחו
  - אפשרות לאשר/לדחות בקשות
- רשימת חברים נוכחית:
  - הצגת כל החברים
  - אפשרות להסרת חברים

### דף פרופיל
- פרטי המשתמש
- רשימת השירים האחרונים ששותפו
- חברים ואפשרות להוספת חברים

## 4. פונקציונליות עיקרית

### הרשמה והתחברות
- הרשמה עם אימייל וסיסמה
- התחברות עם אימייל וסיסמה
- אימות אימייל

### שיתוף שירים
- הדבקת קישור לשיר
- הוספת רגש ותיאור
- תצוגה מקדימה באמצעות oEmbed

### צפייה בפיד
- האזנה לשירים דרך הקישור המשותף
- אפשרות להציג פוסטים של חברים בלבד

### מערכת תגובות
- תגובה ישירה לפוסט
- התראות על תגובות חדשות

### ניהול חברים
- חיפוש משתמשים לפי שם משתמש או אימייל
- שליחת בקשות חברות
- אישור/דחייה של בקשות חברות נכנסות
- הצגת פעילות חברים בפיד
- אפשרות להזמין חברים לאפליקציה

## 5. טכנולוגיות

### Frontend
- HTML, CSS, JavaScript (Vanilla)
- Responsive design לתמיכה במכשירים ניידים


### Backend
- Supabase (Authentication, Database, Storage, Realtime)
- oEmbed API להצגת תצוגה מקדימה של שירים
- Supabase Realtime לעדכון בזמן אמת של תגובות ופוסטים חדשים

### אבטחה
- Row Level Security (RLS) ב-Supabase לשליטה בהרשאות גישה
- אימות אימייל בתהליך ההרשמה
- הגנה מפני Cross-Site Scripting (XSS)

## 6. אספקטים ייחודיים

### תצוגה מקדימה חכמה
- שימוש ב-oEmbed לתצוגה מקדימה של שירים
- הצגת תמונת עטיפה וכותרת השיר
- קישור ישיר להשמעת השיר


### חוויית משתמש
- אנימציות מעבר חלקות
- חווית שיתוף פשוטה ואינטואיטיבית
- משוב מיידי על פעולות (כגון תגובות, שיתופים)
- תצוגה ידידותית בכל גודל מסך

## 7. שלבי פיתוח מומלצים

1. הקמת פרויקט Supabase ויצירת טבלאות
2. בניית מערכת הרשמה והתחברות
3. פיתוח דף פיד בסיסי עם יכולת שיתוף שירים
4. פיתוח מערכת תגובות 
5. פיתוח מערכת חיפוש וניהול חברים
6. פיתוח מערכת התראות
7. שיפור עיצוב ו-UX
8. אופטימיזציה וביצועים
9. בדיקות ותיקון באגים 